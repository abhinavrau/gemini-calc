<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini 2.5 Pro Pricing Calculator</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Inter font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f9;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #10B981; /* Emerald 500 */
            cursor: pointer;
            box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.4);
        }
        input[type="range"]::-moz-range-thumb {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #10B981;
            cursor: pointer;
            border: none;
        }
    </style>
</head>
<body class="p-4 sm:p-8 flex items-center justify-center min-h-screen">

    <div id="calculator-app" class="w-full max-w-4xl bg-white shadow-2xl rounded-xl p-6 sm:p-10 border border-gray-100">

        <!-- Header -->
        <header class="text-center mb-10">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-800">Gemini 2.5 Pro Cost Estimator</h1>
            <p class="text-lg text-gray-500 mt-2">Calculate your expected API costs for text generation.</p>
        </header>

        <main class="grid lg:grid-cols-3 gap-8">
            <!-- Left Column: Input Controls -->
            <div class="lg:col-span-2 space-y-8 p-6 bg-indigo-50 rounded-xl">
                <!-- Cases Input (Slider) -->
                <div class="space-y-2">
                    <label for="cases-range" class="block text-sm font-medium text-gray-700 flex justify-between">
                        <span>Total Number of Cases (API Calls)</span>
                        <span id="cases-value" class="font-bold text-indigo-600">10,000</span>
                    </label>
                    <!-- Removed inline oninput handler -->
                    <input type="range" id="cases-range" min="10000" max="100000" value="10000" step="1000" class="w-full h-2 bg-indigo-200 rounded-lg appearance-none cursor-pointer range-lg">
                    <div class="flex justify-between text-xs text-gray-500">
                        <span>10,000</span>
                        <span>100,000</span>
                    </div>
                </div>

                <!-- Tokens Input (Grid) -->
                <div class="grid sm:grid-cols-2 gap-6 pt-4">
                    <!-- Input Tokens -->
                    <div class="space-y-2">
                        <label for="input-tokens" class="block text-sm font-medium text-gray-700">Average Input Tokens / Case</label>
                        <!-- Removed inline oninput handler -->
                        <input type="number" id="input-tokens" value="2000" min="1" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-gray-900">
                        <p class="text-xs text-gray-500">e.g., Prompt + History size.</p>
                    </div>

                    <!-- Output Tokens -->
                    <div class="space-y-2">
                        <label for="output-tokens" class="block text-sm font-medium text-gray-700">Average Output Tokens / Case</label>
                        <!-- Removed inline oninput handler -->
                        <input type="number" id="output-tokens" value="500" min="1" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-gray-900">
                        <p class="text-xs text-gray-500">e.g., Generated response size (includes thinking tokens).</p>
                    </div>
                </div>
            </div>

            <!-- Right Column: Results & Summary -->
            <div class="lg:col-span-1 space-y-6">
                <div class="p-6 bg-white border border-gray-200 rounded-xl shadow-lg">
                    <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2">Estimated Total Cost</h2>

                    <!-- Total Cost Display -->
                    <div class="text-center py-4 bg-emerald-50 rounded-lg border border-emerald-200">
                        <p class="text-sm font-medium text-emerald-700">Total Estimated Cost</p>
                        <p id="total-cost" class="text-4xl font-extrabold text-emerald-600">$1,025.00</p>
                    </div>

                    <!-- Breakdown -->
                    <div class="mt-6 space-y-3 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-600">Pricing Tier Used:</span>
                            <span id="pricing-tier" class="font-semibold text-gray-800 text-right">Short Prompt (≤ 200K Tokens)</span>
                        </div>
                        <div class="flex justify-between border-t pt-3">
                            <span class="text-gray-600">Total Input Tokens:</span>
                            <span id="total-input-tokens" class="font-semibold text-gray-800">20,000,000</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-600">Total Output Tokens:</span>
                            <span id="total-output-tokens" class="font-semibold text-gray-800">5,000,000</span>
                        </div>
                    </div>
                </div>

                <!-- Pricing Legend -->
                <div class="text-xs text-gray-500 p-4 bg-white rounded-lg border border-gray-200">
                    <p class="font-semibold text-gray-700 mb-2">Gemini 2.5 Pro Pricing (Per 1 Million Tokens)</p>
                    <table class="w-full text-left">
                        <thead>
                            <tr>
                                <th class="py-1">Tier</th>
                                <th class="py-1">Input (USD)</th>
                                <th class="py-1">Output (USD)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="py-1">≤ 200K Tokens</td>
                                <td class="py-1 font-mono">$1.25</td>
                                <td class="py-1 font-mono">$10.00</td>
                            </tr>
                            <tr>
                                <td class="py-1">> 200K Tokens</td>
                                <td class="py-1 font-mono">$2.50</td>
                                <td class="py-1 font-mono">$15.00</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
            
        <!-- Footer / Disclaimer -->
        <footer class="mt-10 pt-6 border-t border-gray-200 text-center text-sm text-gray-500">
            *Pricing based on public Google AI Developer pricing tiers (per 1M tokens). Calculations do not include context caching, grounding, or other service fees.
        </footer>
    </div>

    <script>
        // Wrapping the entire script in an IIFE to create a private scope
        (function() {
            // Constants
            const M = 1000000; // One Million
            const TOKEN_LIMIT = 200000; // The threshold for the pricing tier

            // Pricing Tiers (cost per 1 Million tokens in USD)
            const PRICING_TIERS = {
                SHORT: {
                    input: 1.25,
                    output: 10.00,
                    tierName: "Short Prompt (≤ 200K Tokens)"
                },
                LONG: {
                    input: 2.50,
                    output: 15.00,
                    tierName: "Long Prompt (> 200K Tokens)"
                }
            };

            function formatNumber(number) {
                return new Intl.NumberFormat().format(Math.round(number));
            }

            function formatCurrency(number) {
                return new Intl.NumberFormat('en-US', {
                    style: 'currency',
                    currency: 'USD'
                }).format(number);
            }

            function calculateCost() {
                // 1. Get Input Values
                const cases = parseInt(document.getElementById('cases-range').value) || 0;
                const avgInputTokens = parseInt(document.getElementById('input-tokens').value) || 0;
                const avgOutputTokens = parseInt(document.getElementById('output-tokens').value) || 0;

                if (cases === 0 || avgInputTokens === 0) {
                    document.getElementById('total-cost').innerText = formatCurrency(0);
                    document.getElementById('total-input-tokens').innerText = formatNumber(0);
                    document.getElementById('total-output-tokens').innerText = formatNumber(0);
                    document.getElementById('pricing-tier').innerText = "N/A";
                    return;
                }

                // 2. Determine Pricing Tier
                let tier;
                if (avgInputTokens <= TOKEN_LIMIT) {
                    tier = PRICING_TIERS.SHORT;
                } else {
                    tier = PRICING_TIERS.LONG;
                }

                // 3. Calculate Totals
                const totalInputTokens = cases * avgInputTokens;
                const totalOutputTokens = cases * avgOutputTokens;

                // 4. Calculate Cost
                // Cost = (Total Input Tokens / 1M) * Input Rate + (Total Output Tokens / 1M) * Output Rate
                const inputCost = (totalInputTokens / M) * tier.input;
                const outputCost = (totalOutputTokens / M) * tier.output;
                const totalCost = inputCost + outputCost;

                // 5. Update UI
                document.getElementById('total-cost').innerText = formatCurrency(totalCost);
                document.getElementById('total-input-tokens').innerText = formatNumber(totalInputTokens);
                document.getElementById('total-output-tokens').innerText = formatNumber(totalOutputTokens);
                document.getElementById('pricing-tier').innerText = tier.tierName;
            }

            // Use window.onload to ensure DOM elements and functions are ready before attaching listeners
            window.onload = function() {
                // DOM references
                const casesRange = document.getElementById('cases-range');
                const casesValueDisplay = document.getElementById('cases-value');
                const inputTokensInput = document.getElementById('input-tokens');
                const outputTokensInput = document.getElementById('output-tokens');

                // Function to update the slider display value and trigger calculation
                const updateCasesDisplayAndCalculate = () => {
                    casesValueDisplay.innerText = new Intl.NumberFormat().format(casesRange.value);
                    calculateCost(); 
                };

                // Initial setup: Set initial value display and run first calculation
                updateCasesDisplayAndCalculate(); 

                // Attach listeners to trigger calculateCost() when inputs change
                casesRange.addEventListener('input', updateCasesDisplayAndCalculate);
                inputTokensInput.addEventListener('input', calculateCost);
                outputTokensInput.addEventListener('input', calculateCost);
            };
        })(); // End of IIFE
    </script>
</body>
</html>